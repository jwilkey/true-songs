webpackJsonp([1],{"+yac":function(t,s){},GQXz:function(t,s){t.exports={Gen:"Genesis",Exod:"Exodus",Lev:"Leviticus",Num:"Numbers",Deut:"Deuteronomy",Josh:"Joshua",Judg:"Judges",Ruth:"Ruth","1Sam":"1 Samuel","2Sam":"2 Samuel","1Kgs":"1 Kings","2Kgs":"2 Kings","1Chr":"1 Chronicles","2Chr":"2 Chronicles",Ezra:"Ezra",Neh:"Nehemiah",Esth:"Esther",Job:"Job",Ps:"Psalms",Prov:"Proverbs",Eccl:"Ecclesiastes",Song:"Song of Solomon",Isa:"Isaiah",Jer:"Jeremiah",Lam:"Lamentations",Ezek:"Ezekiel",Dan:"Daniel",Hos:"Hosea",Joel:"Joel",Amos:"Amos",Obad:"Obadiah",Jonah:"Jonah",Mic:"Micah",Nah:"Nahum",Hab:"Habakkuk",Zeph:"Zephaniah",Hag:"Haggai",Zech:"Zechariah",Mal:"Malachi",Matt:"Matthew",Mark:"Mark",Luke:"Luke",John:"John",Acts:"Acts",Rom:"Romans","1Cor":"1 Corinthians","2Cor":"2 Corinthians",Gal:"Galatians",Eph:"Ephesians",Phil:"Philippians",Col:"Colossians","1Thess":"1 Thessalonians","2Thess":"2 Thessalonians","1Tim":"1 Timothy","2Tim":"2 Timothy",Titus:"Titus",Phlm:"Philemon",Heb:"Hebrews",Jas:"James","1Pet":"1 Peter","2Pet":"2 Peter","1John":"1 John","2John":"2 John","3John":"3 John",Jude:"Jude",Rev:"Revelation"}},GR5T:function(t,s){},NHnr:function(t,s,e){"use strict";function a(t){e("+yac")}function n(t){e("GR5T")}function i(t){return t?O.parse(t).osis():""}function o(t){if(t){var s=t.split(","),e=s[0].split("-"),a=e[0].split("."),n=a.length,i=H[a[0]]+" "+a[1]+(n>2?":"+a[2]:""),o="";if(e[1]){var r=e[1].split("."),u=r.length,c=r[1]===a[1];o="-"+(c?"":r[1])+(u>2?(c?"":":")+r[2]:"")}return""+i+o}}function r(t){t.src="",t.play(),t.pause()}function u(t){e("ugib")}function c(t){e("v9ou")}Object.defineProperty(s,"__esModule",{value:!0});var l=e("7+uW"),d={name:"Titlebar",data:function(){return{title:"True Songs"}},methods:{addSong:function(){this.$router.push("/add_song")}}},p=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"titlebar theme-mid flex-row"},[e("p",{staticClass:"flex-one"},[t._v(t._s(t.title))]),t._v(" "),e("a",{on:{click:function(s){s.preventDefault(),t.addSong(s)}}},[e("i",{staticClass:"fa fa-plus"})])])},h=[],m={render:p,staticRenderFns:h},g=m,f=e("VU/8"),v=a,_=f(d,g,!1,v,null,null),b=_.exports,C={name:"app",components:{Titlebar:b}},S=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"theme-back flex-column",attrs:{id:"app"}},[e("titlebar",{staticClass:"shadow"}),t._v(" "),e("router-view",{staticClass:"flex-one"})],1)},P=[],w={render:S,staticRenderFns:P},E=w,T=e("VU/8"),J=n,y=T(C,E,!1,J,null,null),x=y.exports,k=e("/ocq"),M=e("Dd8w"),L=e.n(M),N=e("NYxO"),R=e("mtWM"),U=e.n(R),z="https://true-songs-server.herokuapp.com",A={fetchSongs:function(){return U.a.get(z+"/songs").then(function(t){return t.data})},streamSong:function(t){return U.a.get(z+"/songs/"+t).then(function(t){return t.data})}},D=e("R780"),G=e.n(D),H=e("GQXz"),O=new G.a.bcv_parser;O.options.book_alone_strategy="first_chapter",O.options.book_sequence_strategy="include";var F={osis:i,normalize:function(t){return o(i(t))},readable:o},$={name:"SongList",data:function(){return{audio:void 0,currentSong:void 0,isPlaying:!1,duration:void 0,currentTime:void 0}},computed:L()({},Object(N.c)(["songs"]),{showControls:function(){return this.currentTime&&this.duration},timeLabel:function(){return this.currentTime&&this.duration?this.time(this.currentTime)+" / "+this.time(this.duration):""}}),methods:L()({},Object(N.b)(["setSongs"]),{readable:function(t){return F.normalize(t)},setSong:function(t){r(this.audio);var s=this;this.currentSong=t,this.audio&&this.audio.pause(),A.streamSong(t).then(function(t){s.audio.src=t,s.audio.play(),s.audio.addEventListener("timeupdate",function(){s.duration=s.audio.duration,s.currentTime=s.audio.currentTime}),s.audio.addEventListener("pause",function(){s.isPlaying=!1}),s.audio.addEventListener("play",function(){s.isPlaying=!0}),window.a=s.audio})},time:function(t){var s=parseInt(t%60);return parseInt(t/60)+":"+(s<10?"0":"")+s}}),mounted:function(){this.audio=new Audio;var t=this;A.fetchSongs().then(function(s){t.setSongs(s)})}},I=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"song-list flex-column vfull"},[e("div",{staticClass:"flex-one substance pad"},t._l(t.songs,function(s){return e("div",{staticClass:"flex-row theme-mid song shadow",on:{click:function(e){t.setSong(s.key)}}},[e("p",[t._v(t._s(t.readable(s.passage)))]),t._v(" "),e("p",{staticClass:"blue"},[t._v(t._s(s.artist))])])})),t._v(" "),t.showControls?e("div",{staticClass:"controls-wrapper theme-mid shadow-top"},[e("div",{staticClass:"progress callout-light",style:{width:t.currentTime/t.duration*100+"%"}}),t._v(" "),e("div",{staticClass:"flex-row controls pad"},[t.isPlaying?e("div",{on:{click:function(s){t.audio.pause()}}},[e("i",{staticClass:"fa fa-pause"})]):t._e(),t._v(" "),t.isPlaying?t._e():e("div",{on:{click:function(s){t.audio.play()}}},[e("i",{staticClass:"fa fa-play"})]),t._v(" "),e("div",{staticClass:"flex-one"}),t._v(" "),e("div",{staticClass:"muted"},[t._v("\n        "+t._s(t.timeLabel)+"\n      ")])])]):t._e()])},q=[],K={render:I,staticRenderFns:q},V=K,Z=e("VU/8"),j=u,Q=Z($,V,!1,j,"data-v-7eea558b",null),W=Q.exports,X={name:"AddSong",data:function(){return{artist:void 0,passage:void 0,isEditingPassage:!1,isUploading:!1,errorMessage:void 0}},computed:{postUrl:function(){return"https://true-songs-server.herokuapp.com/songs/upload?artist="+this.artist+"&"},osis:function(){return F.osis(this.passage)},normalizedPassage:function(){return F.normalize(this.passage)}},methods:{updatePassage:function(){this.isEditingPassage=!1,this.passage=this.normalizedPassage},passageFocused:function(){this.isEditingPassage=!0},submit:function(t){var s=this,e=new FormData;e.append("artist",this.artist),e.append("passage",this.osis),e.append("songData",document.getElementById("file").files[0]),s.isUploading=!0,U.a.post(this.postUrl,e).then(function(t){s.errorMessage=void 0,s.isUploading=!1,s.$router.push("/")}).catch(function(t){s.isUploading=!1,s.errorMessage="Error uploading song: "+t})}}},B=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"add-song pad"},[t._m(0,!1,!1),t._v(" "),e("form",{class:{blur:t.isUploading},attrs:{action:t.postUrl,method:"POST",enctype:"multipart/form-data"},on:{submit:function(s){s.preventDefault(),t.submit(s)}}},[e("div",{staticClass:"theme-mid pad shadow marginb"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.artist,expression:"artist"}],staticClass:"input marginb",attrs:{name:"artist",placeholder:"Artist name",required:""},domProps:{value:t.artist},on:{input:function(s){s.target.composing||(t.artist=s.target.value)}}}),t._v(" "),e("div",{staticClass:"passage-chooser marginb"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.passage,expression:"passage"}],staticClass:"input",attrs:{name:"passage",placeholder:"Scripture passage",autocomplete:"off",required:""},domProps:{value:t.passage},on:{focusout:t.updatePassage,focus:t.passageFocused,input:function(s){s.target.composing||(t.passage=s.target.value)}}}),t._v(" "),t.isEditingPassage?e("p",{staticClass:"hint theme-hi muted shadow"},[t._v(t._s(t.normalizedPassage))]):t._e()]),t._v(" "),e("input",{attrs:{id:"file",type:"file",name:"songData"}})]),t._v(" "),e("button",{staticClass:"callout-light marginb",attrs:{disabled:!t.artist||!t.passage}},[t._v("Publish Song")]),t._v(" "),t.errorMessage?e("p",{staticClass:"red"},[t._v(t._s(t.errorMessage))]):t._e()]),t._v(" "),t.isUploading?e("div",{staticClass:"center-box"},[e("i",{staticClass:"blue fa fa-circle-o-notch fa-spin fa-2x"})]):t._e()])},Y=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"theme-mid pad marginb shadow"},[e("h3",[t._v("Add a new song")])])}],tt={render:B,staticRenderFns:Y},st=tt,et=e("VU/8"),at=c,nt=et(X,st,!1,at,null,null),it=nt.exports;l.a.use(k.a);var ot=new k.a({routes:[{path:"/",name:"SongList",component:W},{path:"/add_song",name:"AddSong",component:it}]});l.a.use(N.a);var rt={songs:[]},ut={songs:function(t){return t.songs}},ct={setSongs:function(t,s){(0,t.commit)("SET_SONGS",s)}},lt={SET_SONGS:function(t,s){t.songs=s}},dt=new N.a.Store({state:rt,getters:ut,mutations:lt,actions:ct});l.a.config.productionTip=!1,new l.a({el:"#app",router:ot,store:dt,template:"<App/>",components:{App:x}})},ugib:function(t,s){},v9ou:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.c8bbe474201ea60b8d6a.js.map